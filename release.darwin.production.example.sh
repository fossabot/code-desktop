# Cleanup files
rm -rf node_modules
rm -rf src/ui
rm -rf dist

# Install and build
npm install --only=production
npm run move-ui-production

# Bundle
export NODE_ENV=production
npm run bundle

# Sign
export APPLE_DEVELOPER_IDENTITY="????????????????????????????????????????"
npm run sign

# Package
export APPLE_DEVELOPER_USERNAME="?????@??????.?????"
export APPLE_DEVELOPER_PASSWORD="????-????-????-????"
export APPLE_DEVELOPER_PROVIDER="??????????"
export NODE_ENV=production
npm run package:notarize

# Publish
export S3_KEY="???????????????????"
export S3_SECRET="??????????????????????????????????"
export S3_BUCKET="strawbees-downloads-production"
npm run publish
